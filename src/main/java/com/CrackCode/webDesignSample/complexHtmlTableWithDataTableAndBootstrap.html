<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables - Merge Cells</title>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <style>
        /* General Table Styles */
        table {
            border-collapse: collapse;
            width: 90%;
            table-layout: auto; /* Allows columns to adjust dynamically */
        }

        table.dataTable tbody th, table.dataTable tbody td {
            padding: 0 0 0 0 !important;
        }

        table.dataTable thead th, table.dataTable thead td {
            padding: 0 0 0 0 !important;
        }

        .dataTables_wrapper .dataTables_filter {
            /*search button and filter option*/
            text-align: right;
            margin-bottom: 13px !important;
        }

        table.dataTable, table.dataTable th, table.dataTable td {
            box-sizing: border-box;
            height: 100%!important;
        }

        table.dataTable {
            border-collapse: collapse;
            border-spacing: 0;
        }

        th, td {
            border: 1px solid black;
            padding: 0; /* Removed padding to make sure content fits perfectly */
            text-align: left;
            vertical-align: top; /* Align text to the top */
        }

        /* Fixed first column */
        .fixed-column {
            position: sticky;
            left: 0;
            z-index: 1; /* Keeps the fixed column on top */
        }

        .fixed-column div {
            /* Fixed column in rows */
            display: flex;
            justify-content: center;
        }

        .header-multi-column div {
            display: flex;
            flex-grow: 1;
            height: 100%;
            position: relative;
        }

        .header-multi-column div div {
            flex: 1; /* Distribute space equally */
            border-left: 1px solid black; /* Remove right border and apply left to the next cell */
            padding: 4px;
        }

        /* Adding right border for the last header column */
        .header-multi-column div div:last-child {
            border-right: 1px solid black;
        }

        /* Multi-row cell styling */
        .multi-row-cell {
            display: flex;
            flex-direction: column;
            height: 100%;
            padding: 0;
            margin: 0;
        }

        .multi-row-cell > div {
            display: flex;
            flex-grow: 1; /* Ensure the rows take up available space */
            border: 1px solid black;
        }

        .multi-row-cell > div > div {
            flex: 1; /* Distribute space equally in each row */
            border-left: 1px solid black; /* Same approach for data cells */
            padding: 4px;
        }

        .multi-row-cell > div > div:last-child {
            border-right: 1px solid black;
        }


        /* Styling to ensure the button spans full height */
        .header-multi-column div {
            align-items: stretch; /* Ensures the button spans full height */
        }


    </style>
</head>
<body>
<table id="example" class="display" style="width:100%">
    <thead>
    <tr>
        <th style="border-bottom: 2px solid black;
                                    text-align: center">
            Fixed Column
        </th>
        <th class="multi-row-cell m-0 p-0" style="border-bottom: 2px solid black;
                            text-align: center">

            <div>
                <div>Beneficiary Acc</div>
                <div>Beneficiary Name</div>
                <div>Amount</div>
                <div>Narration</div>
                <div>Mobile No</div>
            </div>
        </th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td class="fixed-column">
            <div>
                <p onclick="alert('show group details')">A</p>
            </div>
            <div>
                <p>parentRef</p>
            </div>
        </td>
        <td class="multi-row-cell" style="height: 100%">
            <div>
                <div>Row 1, Col 2 - Cell 1.1</div>
                <div>Row 1, Col 2 - Cell 1.2</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 1.1</div>
                <div>Row 1, Col 2 - Cell 1.2</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 1.1</div>
                <div>Row 1, Col 2 - Cell 1.2</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 2.1</div>
                <div>Row 1, Col 2 - Cell 2.2</div>
                <div>Row 1, Col 2 - Cell 2.3</div>
                <div>Row 1, Col 2 -kibria</div>
                <div>Row 1, Col 2 - Cell 2.3</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 3.1</div>
                <div>Row 1, Col 2 - Cell 3.2</div>
                <div>Row 1, Col 2 - Cell 3.3</div>
                <div>Row 1, Col 2 - Cell 3.3</div>
                <div>Row 1, Col 2 - Cell 3.3</div>
            </div>
        </td>
    </tr>
    <tr>
        <td class="fixed-column">
            <div>
                <p onclick="alert('show group details')">B</p>
            </div>
            <div>
                <p>parentReff</p>
            </div>
        </td>
        <td class="multi-row-cell">
            <div>
                <div>Row 1, Col 2 - Cell 1.1</div>
                <div>Row 1, Col 2 - Cell 1.2</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell 1.3</div>
                <div>Row 1, Col 2 - Cell wow</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 2.1</div>
                <div>Row 1, Col 2 - Cell 2.2</div>
                <div>Row 1, Col 2 - Cell 2.3</div>
                <div>Row 1, Col 2 - Cell 2.3</div>
                <div>Row 1, Col 2 - Cell 2.3</div>
            </div>
            <div>
                <div>Row 1, Col 2 - Cell 3.1</div>
                <div>Row 1, Col 2 - Cell 3.2</div>
                <div>Row 1, awesome 2 - Cell 3.3</div>
                <div>Row 1, Col 2 - Cell 3.3</div>
                <div>Row 1, Col 2 - Cell 3.3</div>
            </div>
        </td>
    </tr>
    </tbody>
</table>

<script>
    $(document).ready(function () {
        var table = $('#example').DataTable({
            lengthMenu: [[5, 10, 15, 100], [5, 10, 15, 100]],
            paging: true,
            searching: true,
            columnDefs: [{'orderable': false, 'targets': [0, 1]}],
            drawCallback: function (settings) {
                mergeTableCells();
            }
        });

        function mergeTableCells() {
            var rows = $('#example tbody tr');
            var last = null;
            var rowspan = 1;

            rows.each(function (index, row) {
                var currentCell = $(row).find('td:first');
                var currentText = currentCell.text();

                if (last === currentText) {
                    rowspan++;
                    currentCell.remove();
                    $(rows[index - rowspan + 1]).find('td:first').attr('rowspan', rowspan);
                } else {
                    last = currentText;
                    rowspan = 1;
                }
            });
        }
    });
</script>
</body>
</html>